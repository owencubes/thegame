<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Drinking Game NFC Score Tracker</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    function autoSubmitForm(metadata) {
      // Get the form data
      const formData = {
        name: $('#name').val(),
        metadata: metadata
      };

      // Submit form data to Google Apps Script Web App endpoint
      $.ajax({
        url: 'YOUR_GOOGLE_APPS_SCRIPT_URL',  // Replace with your Google Apps Script URL
        method: 'POST',
        contentType: 'application/json',
        data: JSON.stringify(formData),
        success: function(response) {
          console.log("Form submitted successfully:", response);
        },
        error: function(error) {
          console.error("Error submitting form:", error);
        }
      });
    }

    function scanNFC(metadata) {
      // Handle NFC scan, this function should be triggered when a scan is detected
      // For example, let's simulate it here
      if (!metadata) {
        console.error("No NFC metadata found!");
        return;
      }
      
      autoSubmitForm(metadata);  // Automatically submit form when NFC tag is scanned
    }

    $(document).ready(function() {
      // This is a simulation of NFC scan - in real use, replace it with actual NFC scan event handling
      // For testing, you can trigger a manual NFC metadata (this can be replaced with real NFC scan logic)
      const simulatedMetadata = "sample_metadata_12345";  // Replace with actual NFC metadata

      // Simulate a scan after a delay (5 seconds for example)
      setTimeout(function() {
        scanNFC(simulatedMetadata);
      }, 5000); // Simulated scan after 5 seconds (you can trigger this based on your NFC event)
    });
  </script>
</head>
<body>
  <h1>Welcome to the Drinking Game Tracker</h1>
  
  <!-- Player form for first scan -->
  <form id="gameForm">
    <label for="name">Your Name (First Time Only):</label>
    <input type="text" id="name" name="name" required placeholder="Enter your name">
    
    <!-- Hidden metadata field, populated by NFC scan -->
    <input type="hidden" id="metadata" name="metadata">
    
    <button type="submit" style="display: none;">Submit</button> <!-- Hidden submit button for auto-submit -->
  </form>
</body>
</html>
